# Copyright 2021 Gustavo Sanchez
# See LICENSE file for licensing details.

init:
  description: Launch benchmark.
  params:
    kube-burner-config:
      description: YAML file containing valid kube-burner configuration file.
      type: object
      properties:
        content:
          type: string
          default: ""
        templates:
          type: array
    uuid:
      description: |
        Benchmark ID. This is esentially an arbitrary string that is used for 
        different purposes along the benchmark. For example, label the objects
        created by kube-burner. 

        By default is autogenerated. 
        You can generate a new uuid in linux with the commands `uuidgen`.
      type: string
      default: ""

    # Prometheus
    prometheus-metrics-profile:
      description: |
        YAML file containing a list of the prometheus queries that kube-burner
        will execute after finishing the benchmark
      type: string
      default: ""
    prometheus-url:
      description: Prometheus full URL.
      type: string
      default: ""
    prometheus-token:
      description: Prometheus Bearer token.
      type: string
      default: ""
    prometheus-username:
      description: Prometheus username for basic authentication.
      type: string
      default: ""
    prometheus-password:
      description: Prometheus password for basic authentication.
      type: string
      default: ""
    prometheus-skip-tls-verify:
      description: Skip TLS verification for prometheus.
      type: boolean
      default: true
    prometheus-step:
      description: Prometheus step size in seconds.
      type: integer
      default: 30
  required: [kube-burner-config]
  additionalProperties: false

check-alerts:
  description: Evaluate alerts for the given time range.
  params:
    alert-profile:
      description: kube-burner alert profile file
      type: string
      default: ""
    start:
      description: Epoch start time
      type: number
      default: 1632148968
    end:
      description: Epoch end time
      type: number
      default: 1632152568

    # Prometheus
    prometheus-url:
      description: Prometheus full URL.
      type: string
      default: ""
    prometheus-token:
      description: Prometheus Bearer token.
      type: string
      default: ""
    prometheus-username:
      description: Prometheus username for basic authentication.
      type: string
      default: ""
    prometheus-password:
      description: Prometheus password for basic authentication.
      type: string
      default: ""
    prometheus-skip-tls-verify:
      description: Skip TLS verification for prometheus.
      type: boolean
      default: true
    prometheus-step:
      description: Prometheus step size in seconds.
      type: number
      default: 30
